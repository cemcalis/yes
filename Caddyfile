www.ravorcollection.com {
	# Redirect www to the apex (canonical) domain
	redir https://ravorcollection.com{uri} permanent
}

ravorcollection.com {
	encode gzip

	# Reverse proxy API requests to backend service in the Docker network
	reverse_proxy /api/* backend:5000

	# Proxy everything else to the frontend (Next.js) service
	reverse_proxy /* frontend:3000

	# Optional: serve static uploads directly from a mounted path
	# ensure the volume mounts the frontend/public folder to /srv/app/frontend/public
	# file_server /uploads/* {
	#   root /srv/app/frontend/public
	# }

	# Obtain TLS automatically via Let's Encrypt
	tls admin@ravorcollection.com
}
